# 前端国际化

## 国际化所面临的问题

1. 语言翻译
    * 静态文案翻译(前端静态模板文案)
    * 动态文案翻译(server端下发的动态数据)

2. 样式
    * 不同语言文案长度不一样造成的样式错乱
    * 图片的替换

3. 第三方服务 依赖库的国际化

4. 本地化
    * 货币单位
    * 货币汇率
    * 时间格式


## 解决方案

1. 自己配置map
```js
const local = {
  name: {
    en: '',
    zh: ''
  }
}
```

2. 使用现有库  
  vue + vue-i18n  
  angular + angular-translate  
  react + react-intl  
  jquery + jquery.i18n.property  

3. 构建工具层处理  
  webpack有i18n-webpack-plugin, gulp有gulp-static-i18n，这些插件的套路一般都是在你自定义map语言映射表，同时根据插件定义好的需要被编译的代码格式，然后在代码的编译阶段，通过字符串匹配的形式去完成静态文案的替换工作。  
  这些插件仅仅解决了静态文案的问题，比如一些样式,图片替换,class属性,以及动态文案的翻译等工作并没有做。 但是无法实现动态的替换，适合静态类网站


## 实际项目中解决方案 React + react-intl

```js
// en.js 英文
const en_US = {
  'hello': "hello",
  'name': 'my name is {name}'
}
export default en_US;
```

```js
// zh.js 英文
const zh_CN = {
  'hello': "你好",
  'name': 'my name is {name}'
}
export default zh_CN;
```


```jsx
// app.js 导入对应的i18n配置文件
import { addLocaleData, FormattedMessage } from 'react-intl';
import enLocaleData from 'react-intl/locale-data/en';
import zhLocaleData from 'react-intl/locale-data/zh';
import zh from './zh.js';
import en from './en.js';

addLocaleData([...enLocaleData, ...zhLocaleData]);

let lang = 'zh'

<IntlProvider locale={lang} messages={lang === 'zh' ? zh : en}>
  <App>
    <div></div>
    <FormattedMessage id="hello"/>
  </App>
</IntlProvider>
```